(()=>{var e=function(){return e=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},e.apply(this,arguments)};function t(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function r(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)u.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return u}var n,i,o="KEYS",u="VALUES",a="",s=function(){function e(e,t){var r=e._tree,n=Array.from(r.keys());this.set=e,this._type=t,this._path=n.length>0?[{node:r,keys:n}]:[]}return e.prototype.next=function(){var e=this.dive();return this.backtrack(),e},e.prototype.dive=function(){if(0===this._path.length)return{done:!0,value:void 0};var e=l(this._path),t=e.node,r=e.keys;if(l(r)===a)return{done:!1,value:this.result()};var n=t.get(l(r));return this._path.push({node:n,keys:Array.from(n.keys())}),this.dive()},e.prototype.backtrack=function(){if(0!==this._path.length){var e=l(this._path).keys;e.pop(),e.length>0||(this._path.pop(),this.backtrack())}},e.prototype.key=function(){return this.set._prefix+this._path.map((function(e){var t=e.keys;return l(t)})).filter((function(e){return e!==a})).join("")},e.prototype.value=function(){return l(this._path).node.get(a)},e.prototype.result=function(){switch(this._type){case u:return this.value();case o:return this.key();default:return[this.key(),this.value()]}},e.prototype[Symbol.iterator]=function(){return this},e}(),l=function(e){return e[e.length-1]},c=function(e,r,n,i,o,u,s,l){var f,d,h=u*s;try{e:for(var v=t(e.keys()),y=v.next();!y.done;y=v.next()){var p=y.value;if(p===a){var m=o[h-1];m<=n&&i.set(l,[e.get(p),m])}else{for(var g=u,F=0;F<p.length;++F,++g){for(var w=p[F],x=s*g,_=x-s,A=o[x],b=Math.max(0,g-n-1),z=Math.min(s-1,g+n),E=b;E<z;++E){var k=w!==r[E],S=o[_+E]+ +k,C=o[_+E+1]+1,D=o[x+E]+1,O=o[x+E+1]=Math.min(S,C,D);O<A&&(A=O)}if(A>n)continue e}c(e.get(p),r,n,i,o,g,s,l+p)}}}catch(e){f={error:e}}finally{try{y&&!y.done&&(d=v.return)&&d.call(v)}finally{if(f)throw f.error}}},f=function(){function e(e,t){void 0===e&&(e=new Map),void 0===t&&(t=""),this._size=void 0,this._tree=e,this._prefix=t}return e.prototype.atPrefix=function(n){var i,o;if(!n.startsWith(this._prefix))throw new Error("Mismatched prefix");var u=r(d(this._tree,n.slice(this._prefix.length)),2),s=u[0],l=u[1];if(void 0===s){var c=r(g(l),2),f=c[0],h=c[1];try{for(var v=t(f.keys()),y=v.next();!y.done;y=v.next()){var p=y.value;if(p!==a&&p.startsWith(h)){var m=new Map;return m.set(p.slice(h.length),f.get(p)),new e(m,n)}}}catch(e){i={error:e}}finally{try{y&&!y.done&&(o=v.return)&&o.call(v)}finally{if(i)throw i.error}}}return new e(s,n)},e.prototype.clear=function(){this._size=void 0,this._tree.clear()},e.prototype.delete=function(e){return this._size=void 0,y(this._tree,e)},e.prototype.entries=function(){return new s(this,"ENTRIES")},e.prototype.forEach=function(e){var n,i;try{for(var o=t(this),u=o.next();!u.done;u=o.next()){var a=r(u.value,2);e(a[0],a[1],this)}}catch(e){n={error:e}}finally{try{u&&!u.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}},e.prototype.fuzzyGet=function(e,t){return function(e,t,r){var n=new Map;if(void 0===t)return n;for(var i=t.length+1,o=i+r,u=new Uint8Array(o*i).fill(r+1),a=0;a<i;++a)u[a]=a;for(var s=1;s<o;++s)u[s*i]=s;return c(e,t,r,n,u,1,i,""),n}(this._tree,e,t)},e.prototype.get=function(e){var t=h(this._tree,e);return void 0!==t?t.get(a):void 0},e.prototype.has=function(e){var t=h(this._tree,e);return void 0!==t&&t.has(a)},e.prototype.keys=function(){return new s(this,o)},e.prototype.set=function(e,t){if("string"!=typeof e)throw new Error("key must be a string");return this._size=void 0,v(this._tree,e).set(a,t),this},Object.defineProperty(e.prototype,"size",{get:function(){if(this._size)return this._size;this._size=0;for(var e=this.entries();!e.next().done;)this._size+=1;return this._size},enumerable:!1,configurable:!0}),e.prototype.update=function(e,t){if("string"!=typeof e)throw new Error("key must be a string");this._size=void 0;var r=v(this._tree,e);return r.set(a,t(r.get(a))),this},e.prototype.fetch=function(e,t){if("string"!=typeof e)throw new Error("key must be a string");this._size=void 0;var r=v(this._tree,e),n=r.get(a);return void 0===n&&r.set(a,n=t()),n},e.prototype.values=function(){return new s(this,u)},e.prototype[Symbol.iterator]=function(){return this.entries()},e.from=function(n){var i,o,u=new e;try{for(var a=t(n),s=a.next();!s.done;s=a.next()){var l=r(s.value,2),c=l[0],f=l[1];u.set(c,f)}}catch(e){i={error:e}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}return u},e.fromObject=function(t){return e.from(Object.entries(t))},e}(),d=function(e,r,n){var i,o;if(void 0===n&&(n=[]),0===r.length||null==e)return[e,n];try{for(var u=t(e.keys()),s=u.next();!s.done;s=u.next()){var l=s.value;if(l!==a&&r.startsWith(l))return n.push([e,l]),d(e.get(l),r.slice(l.length),n)}}catch(e){i={error:e}}finally{try{s&&!s.done&&(o=u.return)&&o.call(u)}finally{if(i)throw i.error}}return n.push([e,r]),d(void 0,"",n)},h=function(e,r){var n,i;if(0===r.length||null==e)return e;try{for(var o=t(e.keys()),u=o.next();!u.done;u=o.next()){var s=u.value;if(s!==a&&r.startsWith(s))return h(e.get(s),r.slice(s.length))}}catch(e){n={error:e}}finally{try{u&&!u.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}},v=function(e,r){var n,i,o=r.length;e:for(var u=0;e&&u<o;){try{for(var s=(n=void 0,t(e.keys())),l=s.next();!l.done;l=s.next()){var c=l.value;if(c!==a&&r[u]===c[0]){for(var f=Math.min(o-u,c.length),d=1;d<f&&r[u+d]===c[d];)++d;var h=e.get(c);if(d===c.length)e=h;else{var v=new Map;v.set(c.slice(d),h),e.set(r.slice(u,u+d),v),e.delete(c),e=v}u+=d;continue e}}}catch(e){n={error:e}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}var y=new Map;return e.set(r.slice(u),y),y}return e},y=function(e,t){var n=r(d(e,t),2),i=n[0],o=n[1];if(void 0!==i)if(i.delete(a),0===i.size)p(o);else if(1===i.size){var u=r(i.entries().next().value,2),s=u[0],l=u[1];m(o,s,l)}},p=function(e){if(0!==e.length){var t=r(g(e),2),n=t[0],i=t[1];if(n.delete(i),0===n.size)p(e.slice(0,-1));else if(1===n.size){var o=r(n.entries().next().value,2),u=o[0],s=o[1];u!==a&&m(e.slice(0,-1),u,s)}}},m=function(e,t,n){if(0!==e.length){var i=r(g(e),2),o=i[0],u=i[1];o.set(u+t,n),o.delete(u)}},g=function(e){return e[e.length-1]},F="or",w=function(){function n(t){if(null==(null==t?void 0:t.fields))throw new Error('MiniSearch: option "fields" must be provided');this._options=e(e(e({},z),t),{searchOptions:e(e({},E),t.searchOptions||{}),autoSuggestOptions:e(e({},k),t.autoSuggestOptions||{})}),this._index=new f,this._documentCount=0,this._documentIds=new Map,this._fieldIds={},this._fieldLength=new Map,this._avgFieldLength=[],this._nextId=0,this._storedFields=new Map,this.addFields(this._options.fields)}return n.prototype.add=function(e){var r,n,i,o,u=this._options,a=u.extractField,s=u.tokenize,l=u.processTerm,c=u.fields,f=u.idField,d=a(e,f);if(null==d)throw new Error('MiniSearch: document does not have ID field "'.concat(f,'"'));var h=this.addDocumentId(d);this.saveStoredFields(h,e);try{for(var v=t(c),y=v.next();!y.done;y=v.next()){var p=y.value,m=a(e,p);if(null!=m){var g=s(m.toString(),p),F=this._fieldIds[p],w=new Set(g).size;this.addFieldLength(h,F,this._documentCount-1,w);try{for(var x=(i=void 0,t(g)),_=x.next();!_.done;_=x.next()){var A=l(_.value,p);A&&this.addTerm(F,h,A)}}catch(e){i={error:e}}finally{try{_&&!_.done&&(o=x.return)&&o.call(x)}finally{if(i)throw i.error}}}}}catch(e){r={error:e}}finally{try{y&&!y.done&&(n=v.return)&&n.call(v)}finally{if(r)throw r.error}}},n.prototype.addAll=function(e){var r,n;try{for(var i=t(e),o=i.next();!o.done;o=i.next()){var u=o.value;this.add(u)}}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}},n.prototype.addAllAsync=function(e,t){var r=this;void 0===t&&(t={});var n=t.chunkSize,i=void 0===n?10:n,o={chunk:[],promise:Promise.resolve()},u=e.reduce((function(e,t,n){var o=e.chunk,u=e.promise;return o.push(t),(n+1)%i==0?{chunk:[],promise:u.then((function(){return new Promise((function(e){return setTimeout(e,0)}))})).then((function(){return r.addAll(o)}))}:{chunk:o,promise:u}}),o),a=u.chunk;return u.promise.then((function(){return r.addAll(a)}))},n.prototype.remove=function(e){var n,i,o,u,a,s,l=this._options,c=l.tokenize,f=l.processTerm,d=l.extractField,h=l.fields,v=l.idField,y=d(e,v);if(null==y)throw new Error('MiniSearch: document does not have ID field "'.concat(v,'"'));try{for(var p=t(this._documentIds),m=p.next();!m.done;m=p.next()){var g=r(m.value,2),F=g[0];if(y===g[1]){try{for(var w=(o=void 0,t(h)),x=w.next();!x.done;x=w.next()){var _=x.value,A=d(e,_);if(null!=A){var b=c(A.toString(),_),z=this._fieldIds[_],E=new Set(b).size;this.removeFieldLength(F,z,this._documentCount,E);try{for(var k=(a=void 0,t(b)),S=k.next();!S.done;S=k.next()){var C=f(S.value,_);C&&this.removeTerm(z,F,C)}}catch(e){a={error:e}}finally{try{S&&!S.done&&(s=k.return)&&s.call(k)}finally{if(a)throw a.error}}}}}catch(e){o={error:e}}finally{try{x&&!x.done&&(u=w.return)&&u.call(w)}finally{if(o)throw o.error}}return this._storedFields.delete(F),this._documentIds.delete(F),this._fieldLength.delete(F),void(this._documentCount-=1)}}}catch(e){n={error:e}}finally{try{m&&!m.done&&(i=p.return)&&i.call(p)}finally{if(n)throw n.error}}throw new Error("MiniSearch: cannot remove document with ID ".concat(y,": it is not in the index"))},n.prototype.removeAll=function(e){var r,n;if(e)try{for(var i=t(e),o=i.next();!o.done;o=i.next()){var u=o.value;this.remove(u)}}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}else{if(arguments.length>0)throw new Error("Expected documents to be present. Omit the argument to remove all documents.");this._index=new f,this._documentCount=0,this._documentIds=new Map,this._fieldLength=new Map,this._avgFieldLength=[],this._storedFields=new Map,this._nextId=0}},n.prototype.search=function(e,n){var i,o;void 0===n&&(n={});var u=this.executeQuery(e,n),a=[];try{for(var s=t(u),l=s.next();!l.done;l=s.next()){var c=r(l.value,2),f=c[0],d=c[1],h=d.score,v=d.terms,y=d.match,p=v.length,m={id:this._documentIds.get(f),score:h*p,terms:Object.keys(y),match:y};Object.assign(m,this._storedFields.get(f)),(null==n.filter||n.filter(m))&&a.push(m)}}catch(e){i={error:e}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}return a.sort(D),a},n.prototype.autoSuggest=function(n,i){var o,u,a,s;void 0===i&&(i={}),i=e(e({},this._options.autoSuggestOptions),i);var l=new Map;try{for(var c=t(this.search(n,i)),f=c.next();!f.done;f=c.next()){var d=f.value,h=d.score,v=(x=d.terms).join(" ");null!=(F=l.get(v))?(F.score+=h,F.count+=1):l.set(v,{score:h,terms:x,count:1})}}catch(e){o={error:e}}finally{try{f&&!f.done&&(u=c.return)&&u.call(c)}finally{if(o)throw o.error}}var y=[];try{for(var p=t(l),m=p.next();!m.done;m=p.next()){var g=r(m.value,2),F=g[0],w=g[1],x=(h=w.score,w.terms),_=w.count;y.push({suggestion:F,terms:x,score:h/_})}}catch(e){a={error:e}}finally{try{m&&!m.done&&(s=p.return)&&s.call(p)}finally{if(a)throw a.error}}return y.sort(D),y},Object.defineProperty(n.prototype,"documentCount",{get:function(){return this._documentCount},enumerable:!1,configurable:!0}),n.loadJSON=function(e,t){if(null==t)throw new Error("MiniSearch: loadJSON should be given the same options used when serializing the index");return n.loadJS(JSON.parse(e),t)},n.getDefault=function(e){if(z.hasOwnProperty(e))return x(z,e);throw new Error('MiniSearch: unknown option "'.concat(e,'"'))},n.loadJS=function(e,i){var o,u,a,s,l=e.index,c=e.documentCount,d=e.nextId,h=e.documentIds,v=e.fieldIds,y=e.fieldLength,p=e.averageFieldLength,m=e.storedFields,g=e.serializationVersion;if(1!==g&&2!==g)throw new Error("MiniSearch: cannot deserialize an index created with an incompatible version");var F=new n(i);F._documentCount=c,F._nextId=d,F._documentIds=I(h),F._fieldIds=v,F._fieldLength=I(y),F._avgFieldLength=p,F._storedFields=I(m),F._index=new f;try{for(var w=t(l),x=w.next();!x.done;x=w.next()){var _=r(x.value,2),A=_[0],b=_[1],z=new Map;try{for(var E=(a=void 0,t(Object.keys(b))),k=E.next();!k.done;k=E.next()){var S=k.value,C=b[S];1===g&&(C=C.ds),z.set(parseInt(S,10),I(C))}}catch(e){a={error:e}}finally{try{k&&!k.done&&(s=E.return)&&s.call(E)}finally{if(a)throw a.error}}F._index.set(A,z)}}catch(e){o={error:e}}finally{try{x&&!x.done&&(u=w.return)&&u.call(w)}finally{if(o)throw o.error}}return F},n.prototype.executeQuery=function(t,r){var n=this;if(void 0===r&&(r={}),"string"!=typeof t){var i=e(e(e({},r),t),{queries:void 0}),o=t.queries.map((function(e){return n.executeQuery(e,i)}));return this.combineResults(o,t.combineWith)}var u=this._options,a=u.tokenize,s=u.processTerm,l=u.searchOptions,c=e(e({tokenize:a,processTerm:s},l),r),f=c.tokenize,d=c.processTerm,h=f(t).map((function(e){return d(e)})).filter((function(e){return!!e})).map(b(c)).map((function(e){return n.executeQuerySpec(e,c)}));return this.combineResults(h,c.combineWith)},n.prototype.executeQuerySpec=function(n,i){var o,u,a,s,l,c,f=e(e({},this._options.searchOptions),i),d=(f.fields||this._options.fields).reduce((function(t,r){var n;return e(e({},t),((n={})[r]=x(t,r)||1,n))}),f.boost||{}),h=f.boostDocument,v=f.weights,y=f.maxFuzzy,p=e(e({},E.weights),v),m=p.fuzzy,g=p.prefix,F=this._index.get(n.term),w=this.termResults(n.term,n.term,1,F,d,h);if(n.prefix&&(l=this._index.atPrefix(n.term)),n.fuzzy){var _=!0===n.fuzzy?.2:n.fuzzy,A=_<1?Math.min(y,Math.round(n.term.length*_)):_;A&&(c=this._index.fuzzyGet(n.term,A))}if(l)try{for(var b=t(l),z=b.next();!z.done;z=b.next()){var k=r(z.value,2),S=k[0],C=k[1];if(M=S.length-n.term.length){null==c||c.delete(S);var D=g*S.length/(S.length+.3*M);this.termResults(n.term,S,D,C,d,h,w)}}}catch(e){o={error:e}}finally{try{z&&!z.done&&(u=b.return)&&u.call(b)}finally{if(o)throw o.error}}if(c)try{for(var O=t(c.keys()),I=O.next();!I.done;I=O.next()){S=I.value;var M,L=r(c.get(S),2),B=L[0];if(M=L[1]){D=m*S.length/(S.length+M);this.termResults(n.term,S,D,B,d,h,w)}}}catch(e){a={error:e}}finally{try{I&&!I.done&&(s=O.return)&&s.call(O)}finally{if(a)throw a.error}}return w},n.prototype.combineResults=function(e,t){if(void 0===t&&(t=F),0===e.length)return new Map;var r=t.toLowerCase();return e.reduce(_[r])||new Map},n.prototype.toJSON=function(){var e,n,i,o,u=[];try{for(var a=t(this._index),s=a.next();!s.done;s=a.next()){var l=r(s.value,2),c=l[0],f=l[1],d={};try{for(var h=(i=void 0,t(f)),v=h.next();!v.done;v=h.next()){var y=r(v.value,2),p=y[0],m=y[1];d[p]=Object.fromEntries(m)}}catch(e){i={error:e}}finally{try{v&&!v.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}u.push([c,d])}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return{documentCount:this._documentCount,nextId:this._nextId,documentIds:Object.fromEntries(this._documentIds),fieldIds:this._fieldIds,fieldLength:Object.fromEntries(this._fieldLength),averageFieldLength:this._avgFieldLength,storedFields:Object.fromEntries(this._storedFields),index:u,serializationVersion:2}},n.prototype.termResults=function(e,r,n,i,o,u,a){var s,l,c,f,d;if(void 0===a&&(a=new Map),null==i)return a;try{for(var h=t(Object.keys(o)),v=h.next();!v.done;v=h.next()){var y=v.value,p=o[y],m=this._fieldIds[y],g=i.get(m);if(null!=g){var F=g.size,w=this._avgFieldLength[m];try{for(var _=(c=void 0,t(g.keys())),b=_.next();!b.done;b=_.next()){var z=b.value,E=u?u(this._documentIds.get(z),r):1;if(E){var k=g.get(z),C=this._fieldLength.get(z)[m],D=n*p*E*A(k,F,this._documentCount,C,w),O=a.get(z);if(O){O.score+=D,S(O.terms,e);var I=x(O.match,r);I?I.push(y):O.match[r]=[y]}else a.set(z,{score:D,terms:[e],match:(d={},d[r]=[y],d)})}}}catch(e){c={error:e}}finally{try{b&&!b.done&&(f=_.return)&&f.call(_)}finally{if(c)throw c.error}}}}}catch(e){s={error:e}}finally{try{v&&!v.done&&(l=h.return)&&l.call(h)}finally{if(s)throw s.error}}return a},n.prototype.addTerm=function(e,t,r){var n=this._index.fetch(r,O),i=n.get(e);if(null==i)(i=new Map).set(t,1),n.set(e,i);else{var o=i.get(t);i.set(t,(o||0)+1)}},n.prototype.removeTerm=function(e,t,r){if(this._index.has(r)){var n=this._index.fetch(r,O),i=n.get(e);null==i||null==i.get(t)?this.warnDocumentChanged(t,e,r):i.get(t)<=1?i.size<=1?n.delete(e):i.delete(t):i.set(t,i.get(t)-1),0===this._index.get(r).size&&this._index.delete(r)}else this.warnDocumentChanged(t,e,r)},n.prototype.warnDocumentChanged=function(e,r,n){var i,o;if(null!=console&&null!=console.warn)try{for(var u=t(Object.keys(this._fieldIds)),a=u.next();!a.done;a=u.next()){var s=a.value;if(this._fieldIds[s]===r)return void console.warn("MiniSearch: document with ID ".concat(this._documentIds.get(e),' has changed before removal: term "').concat(n,'" was not present in field "').concat(s,'". Removing a document after it has changed can corrupt the index!'))}}catch(e){i={error:e}}finally{try{a&&!a.done&&(o=u.return)&&o.call(u)}finally{if(i)throw i.error}}},n.prototype.addDocumentId=function(e){var t=this._nextId;return this._documentIds.set(t,e),this._documentCount+=1,this._nextId+=1,t},n.prototype.addFields=function(e){for(var t=0;t<e.length;t++)this._fieldIds[e[t]]=t},n.prototype.addFieldLength=function(e,t,r,n){var i=this._fieldLength.get(e);null==i&&this._fieldLength.set(e,i=[]),i[t]=n;var o=(this._avgFieldLength[t]||0)*r+n;this._avgFieldLength[t]=o/(r+1)},n.prototype.removeFieldLength=function(e,t,r,n){var i=this._avgFieldLength[t]*r-n;this._avgFieldLength[t]=i/(r-1)},n.prototype.saveStoredFields=function(e,r){var n,i,o=this._options,u=o.storeFields,a=o.extractField;if(null!=u&&0!==u.length){var s=this._storedFields.get(e);null==s&&this._storedFields.set(e,s={});try{for(var l=t(u),c=l.next();!c.done;c=l.next()){var f=c.value,d=a(r,f);void 0!==d&&(s[f]=d)}}catch(e){n={error:e}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}}},n}(),x=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0},_=((n={}).or=function(e,r){var n,i;try{for(var o=t(r.keys()),u=o.next();!u.done;u=o.next()){var a=u.value,s=e.get(a);if(null==s)e.set(a,r.get(a));else{var l=r.get(a),c=l.score,f=l.terms,d=l.match;s.score=s.score+c,s.match=Object.assign(s.match,d),C(s.terms,f)}}}catch(e){n={error:e}}finally{try{u&&!u.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return e},n.and=function(e,r){var n,i,o=new Map;try{for(var u=t(r.keys()),a=u.next();!a.done;a=u.next()){var s=a.value,l=e.get(s);if(null!=l){var c=r.get(s),f=c.score,d=c.terms,h=c.match;C(l.terms,d),o.set(s,{score:l.score+f,terms:l.terms,match:Object.assign(l.match,h)})}}}catch(e){n={error:e}}finally{try{a&&!a.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}return o},n.and_not=function(e,r){var n,i;try{for(var o=t(r.keys()),u=o.next();!u.done;u=o.next()){var a=u.value;e.delete(a)}}catch(e){n={error:e}}finally{try{u&&!u.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return e},n),A=function(e,t,r,n,i){return Math.log(1+(r-t+.5)/(t+.5))*(.5+2.2*e/(e+1.2*(1-.7+.7*n/i)))},b=function(e){return function(t,r,n){return{term:t,fuzzy:"function"==typeof e.fuzzy?e.fuzzy(t,r,n):e.fuzzy||!1,prefix:"function"==typeof e.prefix?e.prefix(t,r,n):!0===e.prefix}}},z={idField:"id",extractField:function(e,t){return e[t]},tokenize:function(e,t){return e.split(M)},processTerm:function(e,t){return e.toLowerCase()},fields:void 0,searchOptions:void 0,storeFields:[]},E={combineWith:F,prefix:!1,fuzzy:!1,maxFuzzy:6,boost:{},weights:{fuzzy:.45,prefix:.375}},k={combineWith:"and",prefix:function(e,t,r){return t===r.length-1}},S=function(e,t){e.includes(t)||e.push(t)},C=function(e,r){var n,i;try{for(var o=t(r),u=o.next();!u.done;u=o.next()){var a=u.value;e.includes(a)||e.push(a)}}catch(e){n={error:e}}finally{try{u&&!u.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}},D=function(e,t){var r=e.score;return t.score-r},O=function(){return new Map},I=function(e){var r,n,i=new Map;try{for(var o=t(Object.keys(e)),u=o.next();!u.done;u=o.next()){var a=u.value;i.set(parseInt(a,10),e[a])}}catch(e){r={error:e}}finally{try{u&&!u.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return i},M=/[\n\r -#%-*,-/:;?@[-\]_{}\u00A0\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u1680\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2000-\u200A\u2010-\u2029\u202F-\u2043\u2045-\u2051\u2053-\u205F\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u3000-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]+/u;function L(e){return new Promise((function(t,r){e.oncomplete=e.onsuccess=function(){return t(e.result)},e.onabort=e.onerror=function(){return r(e.error)}}))}function B(){return i||(i=function(e,t){var r=indexedDB.open(e);r.onupgradeneeded=function(){return r.result.createObjectStore(t)};var n=L(r);return function(e,r){return n.then((function(n){return r(n.transaction(t,e).objectStore(t))}))}}("keyval-store","keyval")),i}function j(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:B();return t("readonly",(function(t){return L(t.get(e))}))}function N(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:B();return r("readwrite",(function(r){return r.put(t,e),L(r.transaction)}))}let T;importScripts("aws-sdk.js"),console.log("Dependencies loaded");const P=/[\n\r -_]+/u;function R(){return new w({fields:["name"],storeFields:["name","arn","awsService","region"],idField:"arn",searchOptions:{boost:{awsService:2},fuzzy:.3,prefix:!0},tokenize:e=>[...e.split(P).map((e=>e.replace(/([a-z])([A-Z])/g,"$1 $2"))).map((e=>e.toLowerCase()))]})}async function W(){if(T)return T;console.log("Minisearch not initialized, initializing...");const e=JSON.parse(await j("documents")||"{}");return T=R(),T.addAll(e),console.log(JSON.stringify(T)),T}async function J(e,t){if("us-east-1"!==t)return[];const r=new AWS.S3({credentials:e,region:t});return((await r.listBuckets().promise()).Buckets??[]).map((e=>({name:e.Name,awsService:"s3",arn:`arn:aws:s3:::${e.Name}`,region:t})))}async function $(e,t){const r=new AWS.Lambda({credentials:e,region:t});let n,i=!0,o=[];do{const e=await r.listFunctions({Marker:n}).promise();o=[...o,...(e.Functions??[]).map((e=>({name:e.FunctionName,arn:e.FunctionArn,description:e.Description,awsService:"lambda",region:t})))],n=e.NextMarker,i=!1}while(n||i);return o}async function Q(e,t){const r=new AWS.DynamoDB({credentials:e,region:t});let n,i=!0,o=[];do{const u=await r.listTables({ExclusiveStartTableName:n}).promise();o=[...o,...(u.TableNames??[]).map((r=>({name:r,arn:`arn:aws:dynamodb:${t}:${e.accountId}:table/${r}`,awsService:"dynamodb",region:t})))],n=u.NextMarker,i=!1}while(n||i);return o}chrome.runtime.onMessageExternal.addListener((async function(e,t,r){if(console.log("Received message",e),"reindex"===e.type)r(await async function(e,t=["us-east-1","eu-central-1","us-west-2"]){console.log("Reindexing...",{credentials:e});const r=await Promise.all(t.map((t=>async function(e,t){const[r,n,i]=await Promise.all([J(e,t),$(e,t),Q(e,t)]),o=[...r,...n,...i];return await N(`documents-${t}`,JSON.stringify(o)),o}(e,t)))),n=[].concat.apply([],r);await N("documents",JSON.stringify(n)),T?(T.removeAll(),T=R(),T.addAll(n)):await W();return console.log("Reindexing done"),n}(e.credentials));else if(e.q){r((await W()).search(e.q))}}))})();
//# sourceMappingURL=background.js.map
